<apex:page controller="i.CtlLogged" tabStyle="i__Email__c" sidebar="false" title="Emails: My Logged" rendered="{!renderOK}">
<apex:stylesheet value="{!$Resource.i__aastyles}"/>
<apex:outputText value="{!aaTabSet}" escape="false"/>

<apex:form rendered="{!isAAUser}">

<apex:pageBlock title="My Logged Emails">
<apex:pageBlockButtons >
	<input class="btn" type="button" title="View All" onclick="navigateToUrl('/apex/i__aauserallemails?returl={!returl}');" value=" View All " style="margin:2px;"/>
	<apex:commandButton action="{!saveRemove}" value="Delete Emails" style="margin:2px;"/>
</apex:pageBlockButtons>

<span class="helptext">
Logged emails are visible to other Users on the Contact, Lead, Account, Opportunity, and Case pages.
<br/><br/>
</span>

<apex:outputText escape="false" rendered="{!userHasManyAddrs}">
	<span style="font-size:91%;padding-right:10px;">Show mail for:&nbsp;&nbsp;
		<apex:selectList size="1" value="{!selectedUserAddr}" style="font-size:11px;font-family:'Arial','Helvetica',sans-serif;">
			<apex:selectOptions value="{!userAddrs}"/>
			<apex:actionSupport event="onchange" action="{!refreshPager}" rerender="LoggedEmails"/>
		</apex:selectList>
	</span>
</apex:outputText>

<c:EmailList pager="{!pager}" returl="{!returl}" id="LoggedEmails"/>

</apex:pageBlock>

<br/><br/>

<apex:pageBlock >
<apex:facet name="header"><div style="padding:4px;font-weight:bold;">Optional: add addresses to your ignore list</div></apex:facet>
<apex:facet name="footer"><apex:commandButton action="{!saveIgnore}" value="Ignore Addresses" style="margin:8px;"/></apex:facet>

<span class="helptext">
If you see email addresses above that you want ignored, just select them below and click "Ignore".
<br/>
We'll delete the existing records and won't log any in the future.
<br/><br/>
You can always undo this action on your <a href="/apex/i__aaprefs">Email Preferences</a> page.
<br/><br/>
</span>

<apex:pageBlockTable value="{!ignoreItems}" var="each" cellPadding="4">
<apex:column >
	<apex:facet name="header"><input type="checkbox" onclick="$('.cbox_ignore').prop('checked', this.checked);"/>Address</apex:facet>
	<apex:inputCheckbox style="margin-bottom: -1px;" styleClass="cbox_ignore" value="{!each.checked}"/><a href="mailto:{!each.addr}">{!each.addr}</a>
</apex:column>
</apex:pageBlockTable>

<br/>


</apex:pageBlock>

</apex:form>
</apex:page>